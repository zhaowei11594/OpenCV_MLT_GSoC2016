<script>
// if it is not the first button we add the previous text to the corresponding button
if(document.getElementsByClassName('start').length > document.getElementsByClassName('ended').length){
 
 document.write('</div>');
 var NAME = document.getElementById('toUpdate');
 var indx = document.getElementsByClassName('btn').length-1;
 var str = document.getElementsByClassName('btn')[indx].innerHTML;

 // control the name that is set as label
 // substitute:' '>'_','+'>'p','#'>'sharp', other specials>'s'
 for(var j=0; j<str.length; j++){
  var charCode = str.charCodeAt(j);
  if(charCode>96 && charCode<123){
  }else if(charCode>64 && charCode<91){
  }else if(charCode>47 && charCode<58){
  }else if(charCode == 43){
   str = str.substr(0, j) + 'p' + str.substr(j+1);
  }else if(charCode == 32 || charCode == 95){
   str = str.substr(0, j) + '_' + str.substr(j+1);
  }else if(charCode == 35){
   str = str.substr(0, j) + 'sharp' + str.substr(j+1);
  }else{
   str = str.substr(0, j) + 'SpecChar' + str.substr(j+1);
  }
 }

 str = 'toggleable_div label_' + str;
 NAME.className = str;
 NAME.id='done';
}
</script>

<div class='toggle'>

<script>
var endDiv = document.getElementsByClassName('ended');
var startDiv = document.getElementsByClassName('start');

if(startDiv.length <= endDiv.length){
 var newDiv = document.createElement('div');
 newDiv.className = 'start';
 var ind = document.getElementsByClassName('toggle').length-1;
 var elemnt = document.getElementsByClassName('toggle')[ind];
 var parent = elemnt.parentNode;
 parent.replaceChild(newDiv, elemnt);
 newDiv.appendChild(elemnt);
 
if(startDiv.length == 1){
 window.onload = function () {
    var startDiv = document.getElementsByClassName('start');
    for(var m=0; m<startDiv.length; m++) {
      var elements = startDiv[m].getElementsByClassName('btn');
var str;
var tmpstr;
var stop;

for(var i=0; i<elements.length; i++) {
    str = '';
    tmpstr = elements[i].innerHTML;

    //trim
    stop = false;
    var firstIndex = 0;
    var lastIndex = tmpstr.length;
    for(var j=0; j<tmpstr.length && !stop; j++) {
	if(tmpstr.charAt(j) !== ' '){
	   firstIndex = j;
	   stop=true;
	}
    }
    if(stop){
	stop = false;
	for(j=tmpstr.length - 1; j>firstIndex && !stop; j--) {
		if(tmpstr.charAt(j) !== ' '){
		   lastIndex = j;
	 	  stop=true;
		}
    	}
	for(j=firstIndex; j < tmpstr.length && j<(lastIndex + 1); j++) {
	  str+=tmpstr[j];
	}
    }

    if(str==''){
	elements[i--].remove();
    }else{
	str = String.fromCharCode(65+i) + str;
	elements[i].innerHTML = str;
    }
}

elements = startDiv[m].getElementsByClassName('btn');
for(i=0; i<elements.length; i++) {
	elements[i--].className = 'btn1';
}
// Set index to be used in alphabetic order
elements =startDiv[m].getElementsByClassName('btn1');
var str1;
var str2;
var n = elements.length;
var swapped = true;

while (swapped) {
swapped = false;
 for(i=1; i<n; i++) {
    str1 = elements[i-1].innerHTML;
    str2 = elements[i].innerHTML;
    if((str1.substr(1)).localeCompare(str2.substr(1))>0){
	elements[i].innerHTML = str1;
	elements[i-1].innerHTML = str2;
	swapped = true;
    }
 }
 n--;
}

var elements = startDiv[m].getElementsByClassName('btn1');
for(var k=0; k<elements.length; k++) {
 var btn = document.createElement("BUTTON");
 btn.style.border='2px inset';
 btn.style.borderRadius='4px'; 
 btn.style.margin='2px'

 var indexChar = elements[k].innerHTML.charAt(0);
 var str = '';
 var found = false;

for(var o=0; o<elements.length && !found; o++) {
    str = elements[o].innerHTML;
    if(indexChar == str.charAt(0)){
	str = str.substr(1);
	var t = document.createTextNode(str);
 	btn.appendChild(t);
	// control the name that is set as label
	// substitute:' '>'_','+'>'p','#'>'sharp', other specials>'s'
	for(var j=0; j<str.length; j++){
		var charCode = str.charCodeAt(j);
		if(charCode>96 && charCode<123){
		}else if(charCode>64 && charCode<91){
		}else if(charCode>47 && charCode<58){
		}else if(charCode == 43){
		 str = str.substr(0, j) + 'p' + str.substr(j+1);
		}else if(charCode == 32 || charCode == 95){
		 str = str.substr(0, j) + '_' + str.substr(j+1);
		}else if(charCode == 35){
		 str = str.substr(0, j) + 'sharp' + str.substr(j+1);
		}else{
		 str = str.substr(0, j) + 'SpecChar' + str.substr(j+1);
		}
	}

	elements[o].innerHTML = indexChar + str;
	str = 'toggleable_button label_' + str;
	btn.className = str;
	found = true;
    }
  }
(function() {
 var label = btn.className.substr(24);

 btn.onclick= function() {
  $('.toggleable_button').css({border: '2px outset', 'border-radius': '4px'});
  $('.toggleable_button.label_' + label).css({border: '2px inset', 'border-radius': '4px'});
  $('.toggleable_div').css('display', 'none');
  $('.toggleable_div.label_' + label).css('display', 'block');
 };
})();

startDiv[m].appendChild(btn);
    } 


elements = startDiv[0].getElementsByClassName('btn1');
// Click the first button in Alphabetic Order
label = elements[0].innerHTML.substr(1);
$('.toggleable_button').css({border: '2px outset', 'border-radius': '4px'});
 $('.toggleable_button.label_' + label).css({border: '2px inset', 'border-radius': '4px'});
 $('.toggleable_div').css('display', 'none');
 $('.toggleable_div.label_' + label).css('display', 'block');
}

// If Python is found, it has priority to be clicked over Alphabetic Order
for(var k=0; k<elements.length; k++) {
  var local = elements[k].innerHTML.substr(1);
  if(local.localeCompare('Python') == 0){
    label = 'Python';
     $('.toggleable_button').css({border: '2px outset', 'border-radius': '4px'});
     $('.toggleable_button.label_' + label).css({border: '2px inset', 'border-radius': '4px'});
     $('.toggleable_div').css('display', 'none');
     $('.toggleable_div.label_' + label).css('display', 'block');
    break;
  }else if( local.localeCompare('python') == 0){
    label = 'python';
     $('.toggleable_button').css({border: '2px outset', 'border-radius': '4px'});
     $('.toggleable_button.label_' + label).css({border: '2px inset', 'border-radius': '4px'});
     $('.toggleable_div').css('display', 'none');
     $('.toggleable_div.label_' + label).css('display', 'block');
    break;
  }
}

// If Cpp is found, it has priority to be clicked over Python and Alphabetic Order
for(var k=0; k<elements.length; k++) {
  var local = elements[k].innerHTML.substr(1);
  if(local.localeCompare('Cpp') == 0){
    label = 'Cpp';
     $('.toggleable_button').css({border: '2px outset', 'border-radius': '4px'});
     $('.toggleable_button.label_' + label).css({border: '2px inset', 'border-radius': '4px'});
     $('.toggleable_div').css('display', 'none');
     $('.toggleable_div.label_' + label).css('display', 'block');
  }else if( local.localeCompare('cpp') == 0){
    label = 'cpp';
     $('.toggleable_button').css({border: '2px outset', 'border-radius': '4px'});
     $('.toggleable_button.label_' + label).css({border: '2px inset', 'border-radius': '4px'});
     $('.toggleable_div').css('display', 'none');
     $('.toggleable_div.label_' + label).css('display', 'block');
  }
}

 };
}
}else{
 var strtIndex = document.getElementsByClassName('start').length-1;
 var strtElemnt = document.getElementsByClassName('start')[strtIndex];
 var ind = document.getElementsByClassName('toggle').length-1;
 var elemnt = document.getElementsByClassName('toggle')[ind];
 strtElemnt.appendChild(elemnt);
}

</script>

<div class='btn' style='display: none;'></div>
<script>
var indxs = document.getElementsByClassName('btn').length-1;
var eles = document.getElementsByClassName('btn')[indxs];
eles.innerHTML=document.getElementsByClassName('newInnerHTML')[indxs].innerHTML;
</script>

</div>

<!-- Starts the <div> that will contain the text -->
<div id='toUpdate' style='display: none;' class='toggleable_div label_'>
